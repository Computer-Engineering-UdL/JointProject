{% extends "worker/receptionist/base_receptionist.html" %}
<!-- This template allows to enter an id to search for a client reservation -->

{% load static %}
{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/worker/receptionist/check-out/check-out_home.css' %}">
    <link rel="stylesheet"
          href="{% static 'css/worker/receptionist/reservation/manage_reservation/search_reservation.css' %}">
{% endblock extra_css %}

<!-- This block must appear in every reservation template as it is -->
{% block id_reservation %} id="current-page" {% endblock id_reservation %}

{% block content %}
    <div class="main">
        <div class="reservation-search">
            <h2>Cercar reserva</h2>

            <form method="get">
                {% csrf_token %}
                <div class="entry-fields">
                    <div class="form-group">
                        <p>{{ form.num_reservation.label }}</p>
                        {{ form.num_reservation }}
                    </div>
                    <div class="form-group">
                        <p>{{ form.id_number.label }}</p>
                        {{ form.id_number }}
                    </div>
                    <div class="form-group">
                        <p>{{ form.room_num.label }}</p>
                        {{ form.room_num }}
                    </div>
                </div>
                <div class="buttons">
                    <button class="submit-button" type="submit">Filtrar</button>
                </div>
            </form>

            <form method="post">
                {% csrf_token %}
                <div id="notifications">
                    {% if form.non_field_errors %}
                        {% for error in form.non_field_errors %}
                            <p class="notification-err">{{ error }}</p>
                        {% endfor %}
                    {% endif %}
                </div>
            </form>
        </div>

        <h2>Reserves</h2>
        <div id="list">
            <ul class="list-index">
                <li id="reservation-id">Reserva</li>
                <li id="entry">Entrada</li>
                <li id="exit">Sortida</li>
                <li id="name">Client</li>
                <li id="pension">Pensió</li>
                <li id="num-guests">Nº hostes</li>
            </ul>
            <ul class="reservation-list">
                {% for reservation in reservations %}
                    <div class="list-div">
                        <li>
                            <div id="reservation-id">{{ reservation.id }}</div>
                            <div id="entry">{{ reservation.entry }}</div>
                            <div id="exit">{{ reservation.exit }}</div>
                            <div id="name">{{ reservation.client.first_name }}</div>
                            <div id="pension">{{ reservation.pension_type }}</div>
                            <div id="num-guests">{{ reservation.num_guests }}</div>
                        </li>
                        <div class="icons">
                            <div class="icon"><a href="{% url 'reservation_details' pk=reservation.id %}">
                                <img src="{% static 'img/icons/edit-icon.png' %}" alt="edit"></a>
                            </div>
                            <div class="icon">
                                <form action="{% url 'delete_reservation' reservation.id %}" method="post">
                                    {% csrf_token %}
                                    <button type="submit"
                                            onclick="return confirm('Estàs segur que vols eliminar aquesta reserva?');">
                                        <img src="{% static 'img/icons/delete-icon.png' %}" alt="delete"></button>
                                </form>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </ul>
        </div>
    </div>
{% endblock %}